# 更新履歴

このタブは、About タブの「更新点（リリースノート）」部分を分離したものです。

## 最新版の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.23）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| サブグループ（閲覧・修正） | 関連試料のMaterialトークン保存で引数順不整合を修正し、トークン破損を防止。 |
| 設定（トークン状態） | 全トークンリフレッシュの対象を表示中2ホスト（`TokenManager.ACTIVE_HOSTS`）に限定。 |
| 設定（トークン状態） | 確認ダイアログ件数を対象ホスト数に一致させ、非表示エイリアスの失敗通知を抑止。 |
| テスト/品質 | `test_token_status_tab_refresh_all_targets` / `test_subgroup_api_client_material_token_save_order` を追加。 |

## v2.5.23 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.23）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| サブグループ（閲覧・修正） | `subgroup_api_client` で Materialトークン保存呼び出しの引数順を修正（`save_bearer_token(token, host)`）。 |
| 設定（トークン状態） | `token_status_tab` の全トークンリフレッシュ対象を `ACTIVE_HOSTS` のみへ変更。 |
| 設定（トークン状態） | 全トークン確認ダイアログの件数表示を表示対象（2ホスト）に一致させるよう改善。 |
| テスト/品質 | `tests/unit/test_token_status_tab_refresh_all_targets.py` と `tests/unit/subgroup/test_subgroup_api_client_material_token_save_order.py` を追加。 |

## v2.5.22 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.22）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データポータル一覧 | `portal_listing_tab` の `_SourceAwareProxyModel` に `lessThan` を追加し、対象列で数値ソートを実装。 |
| データポータル一覧 | `ファイルサイズ` 列で `bytes/KB/MB/GB...` の単位換算比較を実装。 |
| データポータル一覧 | `code` 列で自然順ソート（数字部分を数値扱い）を実装。 |
| テスト/品質 | `test_portal_listing_proxy_column_filters` に3件のソート回帰テストを追加。 |

## v2.5.21 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.21）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| サブグループ（閲覧・修正） | `subgroup_edit_widget` のコンボボックスで、Completer候補クリック時に `setCurrentIndex` を即時反映する処理を追加。 |
| サブグループ（閲覧・修正） | 選択変更監視を `currentTextChanged` 依存から `currentIndexChanged` / `activated` へ拡張し、選択確定の取りこぼしを抑止。 |
| テスト/品質 | `test_subgroup_edit_combo_completer_selection_sync.py` を追加し、候補クリック・テキスト不変時の選択更新を自動検証。 |

## v2.5.20 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.20）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| サブグループ（新規作成） | `subgroup_member_selector_common` の表示フィルタ処理を修正し、表示対象行に対する重複マージ（同一メール1件化）を実装。 |
| サブグループ（新規作成） | `add_user_by_email` の重複判定を表示中行のみに変更し、フィルタ状態に応じた直接追加を可能化。 |
| サブグループ（新規作成） | `SubgroupCreateHandler` に作成条件の一括検証を追加し、未達条件を1回のメッセージで提示。 |
| テスト/品質 | `test_subgroup_member_selector_filter_consistency.py` などを更新し、表示フィルタ整合・重複統合・作成条件検証の回帰を追加。 |

## v2.5.19 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.19）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データポータル一覧 | `portal_entry_merge` と `portal_listing_tab` の補完経路を強化し、`managed:*` キー欠落時の補完注入に対応。 |
| データポータル一覧 | `portal_listing_tab` の `_SourceAwareProxyModel` で、対象列に対する日付/数値の範囲指定フィルタを実装。 |
| 公開データ抽出 | `data_portal_public` でフォーム型HTMLの抽出（DOI/複数dd/submit値）を改善。 |
| テスト/品質 | `test_portal_listing_proxy_column_filters` / `test_portal_listing_managed_fallback_values` / `test_data_portal_public` などを更新。 |

## v2.5.18 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.18）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データ登録（通常） | `data_register_ui_creator` でテンプレート解決結果を表示し、検証に解決済みテンプレートIDを適用。 |
| データ登録（一括） | `batch_register_widget` でテンプレート解決結果を表示し、ファイルセット必要拡張子にも解決済みテンプレートIDを適用。 |
| テンプレート解決 | `template_format_validator` に `resolve_template` / `get_template_reference_text` を追加。装置ID・版・日付で近似版を選択。 |
| テスト/品質 | `tests/unit/test_template_format_validator.py` にフォールバック/表示テストを追加。 |

## v2.5.17 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.17）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データポータル修正 | `dataset_upload_tab` の `t_code` 取得経路を `keyword=dataset_id` 検索方式へ変更。 |
| データポータル修正 | `portal_entry_status` の解析結果に `t_code` を追加し、hidden input から抽出。 |
| データポータル修正 | 現在選択dataset一致時は抽出済み `current_t_code` を優先再利用、未検出時は安全にクリア。 |
| テスト/品質 | `tests/unit/data_portal/test_portal_entry_status_parser.py` / `tests/unit/test_dataset_upload_tab.py` を更新。 |

## v2.5.16 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.16）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| オフラインモード | `offline_mode` コアを追加し、URL/AIアクセスのサイト別ブロック制御を実装。 |
| 設定UI | 設定タブに「オフライン」タブを追加し、有効化とサイト別対象の保存/反映に対応。 |
| 起動時制御 | オフライン起動時の確認、RDE接続異常時のオフライン移行提案を追加。 |
| 表示/UI | メイン画面に「📴 オフラインモード（対象: ...）」を表示。左メニュー遷移は許可し、通信処理時に制限。 |
| テスト/品質 | offline_mode / ui_controller / settings_offline_tab のテストを追加・更新。 |

## v2.5.15 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.15）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データ取得2 | 一括取得（DP）タブの検索をローカル `output/data_portal_public/output.json` 優先へ変更し、再検索時の遅延/タイムアウトを低減。 |
| データ取得2 | `dataset_id` 解決順を `fields_raw/fields.dataset_id` 優先へ修正し、RDEデータとの結合精度を向上。 |
| データ取得2 | dataEntry の metadata/included 参照による補完経路を追加し、登録者/試料（表示名）/試料（UUID）空欄を低減。 |
| テスト/品質 | bulk_dp_tab のウィジェットテストを拡充し、pytest段階ゲート→pre-build→PyInstaller運用を継続。 |

## v2.5.14 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.14）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データ取得2 | 一括取得（RDE）タブの取得列チェックで、クリック行以外への反映が起きる不安定挙動を抑止。 |
| データ取得2 | RDE検索インデックスのクエリキャッシュ永続化を追加し、再起動後の検索初速を改善。 |
| UI | 左ペイン「データ取得2」の未選択配色を専用グループ色へ修正し、他グループとの識別性を向上。 |
| テスト/品質 | unit/widget の回帰テストを拡充し、pytest段階ゲート→pre-build→PyInstaller運用を継続。 |

## v2.5.13 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.13）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データ取得2 | 一括取得（DP）タブでページングと並列フィルタ処理を改善。RDEタブのフィルタ反映と一覧更新の安定性を強化。 |
| テスト/品質 | 一括取得タブ関連のウィジェットテストを更新し、pytest段階ゲート→pre-build→PyInstaller運用を継続。 |

## v2.5.12 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.12）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データ取得2 | 一括取得（DP/RDE）タブのフィルタ候補・表示モード・検索導線を改善。DP検索の非同期化と操作状態制御を追加。 |
| テスト/品質 | 一括取得タブ関連のウィジェットテストを拡充し、pytest段階ゲート→pre-build→PyInstallerの運用を継続。 |

## v2.5.11 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.11）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データセット一覧 | 一覧設定の整理とUI部品の改善。ポータル公開状態キャッシュ連携と checked_at 補完を追加。 |

## v2.5.10 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.10）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| 配布 | 単一起動ガードの通知安定化と実行ファイル名解決を改善。Inno Setup スクリプトを整備。 |

## v2.5.9 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.9）。VERSION/README/配布物/ヘルプ/ドキュメントのバージョン表記を更新。 |
| データポータル | 一括/一覧タブの初期レイアウト適用、一覧タブの環境選択/自動更新、アップロード済みスキップを追加。 |

## v2.5.8 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.8）。VERSION/README/配布物/ヘルプのバージョン表記を更新。 |
| データポータル | 一括タブの列/フィルタ/実施機関マッピング/JSON状態表示を改善。 |

## v2.5.7 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.7）。VERSION/README/配布物/ヘルプのバージョン表記を更新。 |
| テスト/品質 | pytest 段階ゲート → pre-build（Non-Widget/Widget + coverage）→ PyInstaller の段階ゲートを完走し、回帰を抑止。 |

## v2.5.6 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.6）。VERSION/README/配布物/ヘルプのバージョン表記を更新。 |
| テスト/品質 | pytest 段階ゲート → pre-build（Non-Widget/Widget + coverage）→ PyInstaller の段階ゲートを完走し、回帰を抑止。 |

## v2.5.5 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.5）。VERSION/README/配布物/ヘルプのバージョン表記を更新。 |
| AI説明文提案 | AI拡張/データセット/報告書タブのレイアウトを改善（上下2ペイン・条件付きスクロール・表示行数固定）。 |
| テスト/品質 | pytest 段階ゲート → pre-build（Non-Widget/Widget + coverage）→ PyInstaller の段階ゲートを完走し、回帰を抑止。 |

## v2.5.4 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.4）。VERSION/README/配布物/ヘルプのバージョン表記を更新。 |
| テスト/品質 | pytest 段階ゲート → pre-build（Non-Widget/Widget + coverage）→ PyInstaller の段階ゲートを完走し、回帰を抑止。 |

## v2.5.3 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.3）。VERSION/README/配布物/ヘルプのバージョン表記を更新。 |
| テスト/品質 | pytest 段階ゲート → pre-build（Non-Widget/Widget + coverage）→ PyInstaller の段階ゲートを完走し、回帰を抑止。 |

## v2.5.2 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.2）。VERSION/README/配布物/ヘルプのバージョン表記を更新。 |
| テスト/品質 | pytest 段階ゲート → pre-build（Non-Widget/Widget + coverage）→ PyInstaller の段階ゲートを完走し、回帰を抑止。 |

## v2.5.1 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.1）。VERSION/README/配布物/ヘルプのバージョン表記を更新。 |
| テスト/品質 | pytest 段階ゲート → pre-build（Non-Widget/Widget + coverage）→ PyInstaller の段階ゲートを完走し、回帰を抑止。 |

## v2.5.0 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.5.0）。VERSION/README/配布物のバージョン表記を更新。 |
| テスト/品質 | pre-build（Non-Widget/Widget + coverage）を通過するようユニットテストとゲート運用を安定化。 |

## v2.4.23 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.4.23）。VERSION/README/配布物のバージョン表記を更新。 |
| テスト/品質 | pytest 段階ゲート → pre-build 統合テスト → PyInstaller ビルドを実行して回帰を抑止。 |

## v2.4.22 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データエントリー編集 | 既存試料名の選択肢を追加し、モードに応じてUUID欄の入力可否を切替。 |
| UX | 既存試料選択時のUUID欄を表示専用にし、誤入力を抑止。 |

## v2.4.15 の主な更新点

| 分類 | 内容 |
| --- | --- |
| 更新 | 更新ダウンロードの通信ログをダイアログに表示し、失敗時の切り分けを容易化。 |
| 更新 | bytes ベースの進捗更新に統一し、Content-Length 不明でも「固まって見える」状況を緩和。 |
| 安定性 | 更新ダイアログのUI更新を Signal/QueuedConnection 経由に統一し、スレッド跨ぎの Qt クラッシュを抑止。 |
| UX | インストーラ起動時に「更新のため終了（クラッシュではない）」メッセージを表示。 |
| テスト/品質 | ユニット/ウィジェット/統合テストを実行して回帰を抑止。 |

## v2.4.14 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データセット一覧 | ポータル列の公開状態表示を改善（公開JSON補完/ログインCSV一括判定/セルクリック再確認+セル内スピナー）。 |
| パフォーマンス | 個別アクセス回数を抑制（キャッシュの1日維持・上書き保存、クリック時のみ再確認）。 |
| テスト/品質 | ユニット/ウィジェット/統合テストを実行して回帰を抑止。 |

## v2.4.13 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データセット一覧 | 範囲フィルタ群を2行表示に変更し、視認性を改善。 |
| フィルタ | TAG数の範囲フィルタが絞り込みに反映されない不具合を修正。 |
| データ整合 | file_size は bytes(int) を保持し、エクスポートも bytes を出力するよう統一。 |
| テスト/品質 | ユニット/ウィジェット/統合テストを実行して回帰を抑止。 |

## v2.4.12 の主な更新点

| 分類 | 内容 |
| --- | --- |
| 一覧タブ | 大規模データで固まって見える（無限スピナー）ケースを抑止するため、一覧生成の重い処理を抑制。 |
| 安定性 | 一覧タブの非同期リロードで QThread の寿命管理を改善し、タブ切替等での破棄競合を抑止。 |
| テスト/品質 | ユニット/ウィジェット/統合テストを実行して回帰を抑止。 |

## v2.4.11 の主な更新点

| 分類 | 内容 |
| --- | --- |
| サブグループ一覧 | 複数要素の改行表示、関連データ/試料の個別リンク、長文省略+ツールチップを改善。 |
| UI/可読性 | 行高さを明示制御し、過大な余白で1行しか見えない問題を抑制。 |
| フィルタUI | 範囲フィルタの折り返し時にラベルが重なって見える問題を修正。 |
| テスト/品質 | ユニット/ウィジェット/統合テストを実行して回帰を抑止。 |

## v2.4.10 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データセット一覧 | 範囲フィルタの1行化（「～」表記）・フィルタ領域の折りたたみ（要約表示）を追加。 |
| パフォーマンス | 一覧生成のインメモリキャッシュにより表示を高速化。 |
| エクスポート | CSV/XLSXエクスポートで日時付きの既定ファイル名を保存ダイアログにサジェスト。 |
| テスト/品質 | ユニット/ウィジェット/統合テストを実行して回帰を抑止。 |

## v2.4.9 の主な更新点

| 分類 | 内容 |
| --- | --- |
| リリース/品質 | リビジョンアップ（v2.4.9）。REVISION/VERSION.txt/README/ヘルプのバージョン表記を統一。 |
| ドキュメント | 実装と整合するようドキュメントを更新し、古いリリースノート/旧ドキュメントをアーカイブへ退避。 |
| テスト | ユニット/ウィジェット/統合テストを実行して回帰を抑止。 |

## v2.4.8 の主な更新点

| 分類 | 内容 |
| --- | --- |
| AI | AI説明文提案ダイアログの「報告書」タブを拡張し、横断技術領域（主/副）の列表示と事前フィルタに対応。 |
| AI | 結果一覧タブ（対象=報告書）で、年度/機関コード/横断/重要（主/副）列の表示と絞り込みを追加。 |
| AI/品質 | 報告書ログの target_key が課題番号のみの場合でも converted.xlsx と結合して値を補完し、空欄を抑制。 |
| テスト/品質 | 上記 UI のウィジェットテストを更新し、回帰を防止。 |

## v2.4.7 の主な更新点

| 分類 | 内容 |
| --- | --- |
| 設定/メール | メールタブの非機微設定（From/SMTP host等）を OS キーチェーンへ退避し、上書きインストール等で設定JSONが初期化されても自動復元できるように改善。 |
| UI | 設定画面の MISC タブをタブ一覧の最後尾へ移動。 |
| 更新 | MISC タブのアプリ更新後に自動で再起動するフローを追加（インストーラ完了待ち→再起動を別プロセスへ委譲）。 |
| テスト/品質 | Windows + PySide6 + pytest-qt の長時間実行で発生し得るクラッシュを回避するため、描画監視のイベントフックをroot配下に限定して安定化。 |

## v2.4.6 の主な更新点

| 分類 | 内容 |
| --- | --- |
| テスト/品質 | Windows + PySide6 + pytest-qt 環境での長時間スイート実行を安定化するため、待機処理/実行手順を見直し。 |
| テスト/運用 | フルスイートを「非widget → widget」に分割して実行できるようにし、単一コマンドでの完走性を改善。 |
| ドキュメント | VERSION/README/ヘルプのバージョン表記を v2.4.6 に更新。 |

## v2.4.5 の主な更新点

| 分類 | 内容 |
| --- | --- |
| テスト/品質 | 統合テストでの patch 互換性を維持するため、フォーム生成関数の公開API（モジュールレベル）を復旧。 |
| データセット | 起動ペイロードが先着した場合でもデータセット事前選択が外れないよう、初期ロードと受信登録タイミングを調整。 |
| パス管理 | 診断ユーティリティのパス解決で CWD 依存を排除し、動的パス解決へ統一。 |
| テーマ | スプラッシュ画面の文字色の直書きを廃止し、テーマキーから取得するよう改善。 |

## v2.4.4 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データ取得2 | メール通知タブ: 対象通知リストのフィルタを自動通知の送信対象にも適用（表示されていないものは送信しない）。 |
| データ取得2 | メール通知タブ: 「通知対象抽出」で最新情報取得も同時に行うオプションを追加。 |
| データ取得2 | メール通知タブ: 基準日時に「自動（現在）/直接指定」モードを追加。 |
| データ取得2 | メール通知タブ: 削除テンプレが再起動で復活する不具合を抑止。 |

## v2.4.3 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データ取得2 | メール通知タブの運用を改善（運用モード表示の簡略化、本番送信先に設備管理者を追加）。 |

## v2.4.2 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データ取得2 | メール通知タブを拡張（テンプレ編集の分離、宛先選択の明確化、送信ログ運用の改善、設備管理者プレースホルダ対応）。 |
| 設備 | 設備管理者（設備IDごと）の編集・永続化UIを追加し、装置名フォールバック補完と表示不具合を修正。 |

## v2.4.1 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データ取得2 | メール通知タブを改善（運用モード: テスト/本番、送信先: 投入者/所有者/両方、抽出範囲プリセット、送信ログ閲覧）。 |
| メール | Gmail/SMTPのFrom表示名（任意）を追加し、送信ヘッダへ反映。 |

## v2.4.0 の主な更新点

| 分類 | 内容 |
| --- | --- |
| データ登録 | 「登録状況」タブを拡張し、自動確認（10秒ポーリング）・進捗可視化・停止トグル・リンク列縮小・水平スクロール対応・追加列（投入者/所有者/エラー情報）を実装。 |
| パフォーマンス | 大量行でも固まりにくいよう、キャッシュ読込の非同期化とセルクリック方式へ最適化。 |
| UI/UX | 登録状況タブで発生していたウィンドウ固定幅化を解消し、リサイズ可能に修正。 |
