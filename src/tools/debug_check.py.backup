#!/usr/bin/env python3
"""
デバッグ用：setup_web_get_requestメソッドの存在確認
"""
import sys
import os
from PyQt5.QtWidgets import QApplication

# パス管理システムを使用（CWD非依存）
# 注意: モジュールパスの設定は共通設定で管理

try:
    # QApplicationを作成（GUI必須）
    app = QApplication(sys.argv)
    
    # クラスをインポート
    from rde_dataset_creation_gui import RDEDatasetCreationGUI
    
    print("✅ クラスのインポート成功")
    
    # インスタンス作成
    app_instance = RDEDatasetCreationGUI(parent_webview=None)
    
    print("✅ インスタンス作成成功")
    
    # メソッドの存在確認
    if hasattr(app_instance, 'setup_web_get_request'):
        print("✅ setup_web_get_requestメソッドが存在します")
        print(f"メソッドタイプ: {type(getattr(app_instance, 'setup_web_get_request'))}")
        
        # メソッドのテスト実行
        try:
            test_url = "https://rde.nims.go.jp/rde/datasets/groups/root"
            app_instance.setup_web_get_request(test_url)
            print("✅ メソッドのテスト実行成功")
        except Exception as e:
            print(f"❌ メソッドのテスト実行エラー: {e}")
    else:
        print("❌ setup_web_get_requestメソッドが見つかりません")
        
    # 利用可能なメソッド一覧（setup_で始まるもの）
    setup_methods = [method for method in dir(app_instance) if method.startswith('setup_')]
    print(f"\n利用可能なsetup_メソッド: {setup_methods}")
    
except ImportError as e:
    print(f"❌ インポートエラー: {e}")
except Exception as e:
    print(f"❌ その他のエラー: {e}")
    import traceback
    traceback.print_exc()
